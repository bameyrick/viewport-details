language: node_js
version: "~> 1.0.0"
node_js:
- 12.18.3
cache: yarn
jobs:
  include:
  - stage: test
    script: yarn lint && yarn test-single && codecov
  - stage: npm-bundle
    script: yarn build && npm version $TRAVIS_BRANCH --allow-same-version --allow-empty
    deploy:
      edge: true
      provider: npm
      email: bameyrick@gmail.com
      api_key:
        secure: goy1IgmUo5/7OfeZTJu9XApOmO5/DYAAfu0w/j/mAmyEX7PJcYuzJDWXC+zM2MV5DM/U0fhH+6+edKXu8OhSTSff238bNEeUtAwxyaV03EjbMaMAKE9VnQrcAv6JkIFmIR4Mn7blu00yp/enbQUFBv1dFBJEw+xb00ynNq9x1jCjNoxgYX8Wa4kpSx1xpoxTnJJHUvRJgEQZvHKHwAl/Jqs7aJlbRYtEseYdBw+puh2X83Sd+ZsXaUfca6IShBH5TW8WwOCEzUFNylFy/Vuwu1VMcUkrJImexbzd7b9pmqmntrX3/Lrg1R6tdTHjHbG1ftUng/bb6I57i3zTuOVKe+WgGWZcYx3N2/xFotxOZj4Lo08CxtvTcNOwhQb/lq8O5WZ4ViiNPFt3zn3QoPg7ZDAXfZXDWWogjpLBLUsoDSA6/rIa6yp7ewh6zKKzgJZ9Po/7humsQC6nPiAmOhlTeWYq8k6nGV6LrtrhRszJbkt6gdscyPIZG9UJ8p5OeYnxcWt302jUPpoXI8ZjG2D6aLM0yCCjRl1/3ZOSqRNGnrBOUC0K8McX9hdDRWTsB91EmrnT9IrViwgu1iifWm7/Rgto79AKfM9gqsWyW+bCOq3Ok3M1nNBwXBev8YQTlB0mr+Qc57TKz81LRjG9E0NwvCtWQePIGXLsRUzF4SSMbGQ=
      on:
        tags: true
stages:
- name: test
  if: tag IS NOT present
- name: npm-bundle
  if: tag IS present
