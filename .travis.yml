language: node_js
version: "~> 1.0.0"
node_js:
- 12.18.3
cache: yarn
jobs:
  include:
  - stage: test
    script: yarn lint && yarn test-single && codecov
  - stage: npm-bundle
    script: yarn build && npm version $TRAVIS_BRANCH --allow-same-version --allow-empty
    deploy:
      edge: true
      provider: npm
      email: bameyrick@gmail.com
      api_key:
        secure: 1mxl/8DDEdYYgHV1L/ezc8HfkB/z0xmZ8LLJl2p2QGNmxBHRdljq2phT00REbzNcDEwM3UVVvC2wnN9pVWvECcaFZeByg2ynXkuKZJO8QeEJMnTglC3F7ibEG+fvjR2YUv6zDNzJqfLsiSkH3LsX+aeOobF8+JHBM1CKPOH4NcRnGVawXzoxWK7PRIrJrAuJiD1jqojx+vCYfIM6Tr96Bmc/zcy0gf5Rku4AdK3TxVyPWxwiF1Wo55xbsBD1mxtrEbqlmyKlJ9bcg1mogbnLPYu+wYUrYhD51rx5H7SBa9uLLIIZHGeXiy8PWl1jvH17LzizzpgHGPC5gc7GkvUBst8otvZ/ZFRHqPLn8XdjMz0dmmpVIfpFY7CNrlR5g25K4sLpaNZnWFGHUGD4EqgSApW1sOMz7jkLQTVnFJgp5G8AbtxttkuRXy3N4zq0/epewKTTb9tQq9Eb4FL1VsP4q/Vftc0/dz2HVLYSfww5Z4ZIlsME/CA43cTz0BpcE6nM+0XcE2TceTeX1ojLE+X3+N0G/D8xyDGRSaSQdc0Al0b4Z0StgOgeelFuI8X+aI8b1Zc6E2p19q8fh0yWQNJm08jHPjfVOPsOggCQKADhHCzzW4wKGJrt76IPIGbAUnAa0blFlzn0iuxNTKQ+8+BBRDhgEyRvlcgyaPqwx7LOUEk=
      on:
        tags: true
stages:
- name: test
  if: tag IS NOT present
- name: npm-bundle
  if: tag IS present
